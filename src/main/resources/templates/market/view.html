<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>팜스토리::장보기</title>
    <link rel="stylesheet" href="../css/style.css"/>

    <script>
        window.onload = function (){
            // 수량 변경시 합계 가격 변동 코드
            const count = document.getElementById('count');
            const totalPrice = document.getElementById('totalPrice');
            const discount = document.getElementById('discount');
            const price = document.getElementById('price');
            const delCost = document.getElementById('delCost');
            const delType = document.getElementById('delType');
            const discountRatio = document.getElementById('discountRatio');
            const deliveryCost = document.getElementById('deliveryCost');
            const finalPrice = document.getElementById('finalPrice');

            count.addEventListener('input', function() {
                // 할인 적용 안된 금액
                let total = count.value * parseInt(price.innerText);
                totalPrice.innerText = total;
                // 할인금액
                let discountPrice = total * parseInt(discount.innerText) / 100;
                discountRatio.innerText = discountPrice;
                // 배송비
                let cost = parseInt(delCost.innerText);
                if (delType.innerText <= (total - discountPrice)){
                    cost = 0;
                    deliveryCost.innerText = cost;
                }else {
                    deliveryCost.innerText = cost;
                }

                // 최종 금액
                let fffff = total - discountPrice + cost;
                finalPrice.innerText = fffff;
            });
        }
    </script>

</head>
<body>
<div id="container">
    <header>
        <a href="../index.html" class="logo"><img src="../images/logo.png" alt="로고"/></a>
        <p>
            <a href="#">HOME |</a>
            <a href="#">로그인 |</a>
            <a href="#">회원가입 |</a>
            <a href="#">고객센터</a>
        </p>
        <img src="../images/head_txt_img.png" alt="3만원 이상 무료배송"/>

        <ul class="gnb">
            <li><a href="#">팜스토리소개</a></li>
            <li><a href="#"><img src="../images/head_menu_badge.png" alt="30%"/>장바구니</a></li>
            <li><a href="#">농작물이야기</a></li>
            <li><a href="#">이벤트</a></li>
            <li><a href="#">커뮤니티</a></li>
        </ul>
    </header>

    <div id="sub">
        <div><img src="../images/sub_top_tit2.png" alt="MARKET"></div>
        <section class="market">
            <aside>
                <img src="../images/sub_aside_cate2_tit.png" alt="장보기"/>

                <ul class="lnb">
                    <li class="on"><a href="./market.html">장보기</a></li>
                </ul>
            </aside>
            <article class="view">
                <nav>
                    <img src="../images/sub_nav_tit_cate2_tit1.png" alt="장보기"/>
                    <p>
                        HOME > 장보기 > <em>장보기</em>
                    </p>
                </nav>

                <!-- 내용 시작 -->
                <h3>기본정보</h3>
                <div class="basic">
                    <img th:src="@{/images/__${productDTO.thumbnail}__}" th:alt="${productDTO.prodname}" style="width: 240px;">

                    <table border="0">
                        <tr>
                            <td>상품명</td>
                            <td>[[${productDTO.prodname}]]</td>
                        </tr>
                        <tr>
                            <td>상품코드</td>
                            <td>[[${productDTO.prodno}]]</td>
                        </tr>
                        <tr>
                            <td>배송비</td>
                            <td>
                                <span id="delCost">[[${productDTO.delCost}]]</span>원
                                <em><i id="delType">[[${productDTO.delType}]]</i>원 이상 무료배송</em>
                            </td>
                        </tr>
                        <tr>
                            <td>판매가격</td>
                            <td><i id="price">[[${productDTO.price}]]</i>원</td>
                        </tr>
                        <tr>
                            <td>할인</td>
                            <td><i id="discount">[[${productDTO.discount}]]</i>%</td>
                        </tr>
                        <tr>
                            <td>구매수량</td>
                            <td>
                                <input type="number" name="count" min="1" value="0" id="count">
                            </td>
                        </tr>
                        <tr>
                            <td>합계</td>
                            <td class="total">
                                +<i id="totalPrice"></i>원<br>
                                -<i id="discountRatio"></i>원<br>
                                +<i id="deliveryCost"></i>원<br>
                                =<i id="finalPrice"></i>원
                            </td>
                        </tr>
                        <style>

                        </style>

                    </table>

                    <div style="float: right; margin-top: 10px;">
                        <a href="./cart.html" id="btnCart" class="btn btnCart">장바구니</a>
                        <a href="./order.html" id="btnOrder" class="btn btnOrder">바로구매</a>
                    </div>
                </div>
                <h3>상품설명</h3>
                <div class="detail">
                    <img src="../images/market_detail_sample.jpg" alt="">

                </div>

                <h3>배송정보</h3>
                <div class="delivery">
                    <p>
                        입금하신 이후 택배송장번호는 SMS(문자서비스)를 통해 고객님께 안내해드립니다.
                    </p>
                </div>

                <h3>교환/반품</h3>
                <div class="exchange">
                    <table border="0">
                        <tr>
                            <td>교환 반품이 가능한 경우</td>
                            <td>
                                <ul>
                                    <li>팜스토리 상품에 하자가 있거나 불량인 경우</li>
                                    <li>채소, 과일, 양곡등의 식품은 만1일 이내</li>
                                    <li>기타 상품은 수령일로부터 영업일 기준 일주일 이내</li>
                                    <li>받으신 상품이 표시사항과 다른 경우에는 받으신 날로부터 일주일 이내</li>
                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <td>교환 반품이 불가능한 경우</td>
                            <td>
                                <ul>
                                    <li>신선 식품의 경우 단순히 마음에 들지 않는 경우</li>
                                    <li>단순 변심으로 상품이 가치가 훼손돼서 판매가 어려운 경우</li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                </div>
                <!-- 내용 끝 -->
            </article>
        </section>

    </div>


    <footer>
        <img src="../images/footer_logo.png" alt="로고"/>
        <p>
            (주)팜스토리 / 사업자등록번호 123-45-67890 / 통신판매업신고 제 2013-팜스토리구-123호 / 벤처기업확인 서울지방중소기업청 제 012345678-9-01234호<br />
            등록번호 팜스토리01234 (2013.04.01) / 발행인 : 홍길동<br />
            대표 : 홍길동 / 이메일 : email@mail.mail / 전화 : 01) 234-5678 / 경기도 성남시 잘한다구 신난다동 345<br />
            <em>Copyright(C)홍길동 All rights reserved.</em>
        </p>
    </footer>
</div>
</body>
</html>