<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/layout/userLayout}">

<div class="container" layout:fragment="content">
    <main>
    <div id="sub">
        <div><img th:src="@{/images/sub_top_tit2.png}" alt="MARKET"></div>
        <section class="market">
            <aside>
                <img src="../images/sub_aside_cate2_tit.png" alt="장보기"/>

                <ul class="lnb">
                    <li class="on"><a href="./market.html">장보기</a></li>
                </ul>
            </aside>
            <article class="list">
                <nav>
                    <img th:src="@{/images/sub_nav_tit_cate2_tit1.png}" alt="장보기"/>
                    <p>
                        HOME > 장보기 > <em>장보기</em>
                    </p>
                </nav>

                <!-- 내용 시작 / 해당 버튼 눌렀을때 on 옮겨가게 해야함-->
                <p class="sort">
                    <a th:href="@{/market/list}" class="on">전체(10) |</a>
                    <a th:href="@{/market/list(cate=과일)}">과일 |</a>
                    <a th:href="@{/market/list(cate=야채)}">야채 |</a>
                    <a th:href="@{/market/list(cate=곡류)}">곡류</a>
                </p>
                <table border="0">
                    <thead>
                    <tr>
                        <th>이미지</th>
                        <th>종류</th>
                        <th>상품명</th>
                        <th>할인</th>
                        <th>포인트</th>
                        <th>판매가격</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="product : ${marketPageResponseDTO.dtoList}">
                        <td>
                            <a th:if="${marketPageResponseDTO.pg}==null" th:href="@{/market/view(prodno=${product.prodno}, cate=${marketPageResponseDTO.cate}, type=${marketPageResponseDTO.type}, keyword=${marketPageResponseDTO.keyword})}">
                                <img th:src="@{'/imagePath/'+${product.thumb}}" th:alt="${product.prodname}"></a>
                            <a th:if="${marketPageResponseDTO.pg}!=null" th:href="@{/market/view(prodno=${product.prodno}, cate=${marketPageResponseDTO.cate}, pg=${marketPageResponseDTO.pg}, type=${marketPageResponseDTO.type}, keyword=${marketPageResponseDTO.keyword})}">
                                <img th:src="@{'/imagePath/'+${product.thumb}}" th:alt="${product.prodname}"></a>
                        </td>
                        <td class="type">[[${product.cate}]]</td>
                        <td class="title"><a href="#">[[${product.prodname}]]</a></td>
                        <td class="discount">[[${product.discount}]]</td>
                        <td class="point">[[(${product.price} - (${product.price} * ${product.discount} / 100)) / 10]] </td>
                        <td class="price">
                            <strong>[[${product.price} - (${product.price} * ${product.discount} / 100)]]</strong><br>
                            <del>[[${product.price}]]</del>
                        </td>
                    </tr>

                    </tbody>
                </table>

                <p class="paging">
                    <th:block th:if="${marketPageResponseDTO.prev}">
                        <a th:if="${marketPageResponseDTO.keyword == null}" th:href="@{/market/list(cate=${marketPageResponseDTO.cate}, pg=${marketPageResponseDTO.start - 1})}">이전</a>
                        <a th:if="${marketPageResponseDTO.keyword != null}" th:href="@{/market/list(cate=${marketPageResponseDTO.cate}, pg=${marketPageResponseDTO.start - 1},
                                                                                        type=${marketPageResponseDTO.type}, keyword=${marketPageResponseDTO.keyword})}">이전</a>
                    </th:block>
                    <th:block th:each="n : ${#numbers.sequence(marketPageResponseDTO.start, marketPageResponseDTO.end)}">
                        <a th:if="${marketPageResponseDTO.keyword == null}" th:href="@{/market/list(cate=${marketPageResponseDTO.cate}, pg=${n})}" th:text="${n}"></a>
                        <a th:if="${marketPageResponseDTO.keyword != null}" th:href="@{/market/list(cate=${marketPageResponseDTO.cate}, pg=${n},
                                                                    type=${marketPageResponseDTO.type}, keyword=${marketPageResponseDTO.keyword})}" th:text="${n}"></a>
                    </th:block>
                    <th:block th:if="${marketPageResponseDTO.next}">
                        <a th:if="${marketPageResponseDTO.keyword == null}" th:href="@{/market/list(cate=${marketPageResponseDTO.cate}, pg=${marketPageResponseDTO.end + 1})}">다음</a>
                        <a th:if="${marketPageResponseDTO.keyword != null}" th:href="@{/market/list(cate=${marketPageResponseDTO.cate}, pg=${marketPageResponseDTO.end + 1},
                                                                                        type=${marketPageResponseDTO.type}, keyword=${marketPageResponseDTO.keyword})}">다음</a>
                    </th:block>
                </p>

                <!-- 내용 끝 -->

            </article>
        </section>

    </div>
    </main>
</div>
</html>